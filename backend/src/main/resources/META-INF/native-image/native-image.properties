# Native Image Configuration for BSS Backend
# This file provides additional configuration for the native-image build

# Main class
Args = -H:Class=com.droid.bss.BssApplication \
       -H:Name=bss-backend-native \
       --no-fallback \
       --enable-http \
       --enable-https \
       -H:+ReportExceptionStackTraces \
       -H:Debug=none \
       -H:Log=registerResource:warning \
       --rerun-class-initialization-at-runtime=org.postgresql.ssl.NonValidatingFactory \
       -H:ResourceConfigurationResources=META-INF/native-image/resource-config.json \
       -H:ReflectionConfigurationResources=META-INF/native-image/reflect-config.json \
       -H:ProxyConfigurationResources=META-INF/native-image/proxy-config.json \
       -H:SerializationConfigurationResources=META-INF/native-image/serialization-config.json \
       -H:DynamicProxyConfigurationResources=META-INF/native-image/dynamic-proxies.json \
       -H:JNIConfigurationResources=META-INF/native-image/jni-config.json \
       -H:HibernateReflectionConfigurationResources=META-INF/native-image/hibernate-reflect-config.json

# Build-time initialization
# Classes that should be initialized at build time
# to avoid initialization costs at runtime
RunInit = com.droid.bss.BssApplication

# Remove unused features
RemoveSaturatedTypeFlows = true
RemoveUnusedConfig = true

# Optimization flags
OptimizeForSize = true
OptimizeForInitialBuild = true

# Garbage collection
UseSerialGC = true

# Monitoring and debugging
EnableServer = false
EnableJVMCI = false
